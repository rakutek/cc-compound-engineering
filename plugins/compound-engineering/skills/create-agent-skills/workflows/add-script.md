# Workflow: スキルにスクリプトを追加する

<required_reading>
**今すぐこれらのリファレンスファイルを読んでください:**
1. references/using-scripts.md
</required_reading>

<process>
## ステップ1: スキルを特定する

（まだ提供されていない場合）以下を尋ねます:
- どのスキルにスクリプトが必要ですか？
- スクリプトはどのような操作を実行すべきですか？

## ステップ2: スクリプトの必要性を分析する

これが良いスクリプト候補であることを確認します:
- [ ] 複数の呼び出しで同じコードが実行される
- [ ] 書き直すとエラーが発生しやすい操作である
- [ ] 柔軟性よりも一貫性が重要である

適切でない場合は、代替案（ワークフロー内のインラインコード、リファレンス例）を提案します。

## ステップ3: scriptsディレクトリを作成する

```bash
mkdir -p ~/.claude/skills/{skill-name}/scripts
```

## ステップ4: スクリプトを設計する

要件を収集します:
- スクリプトにはどのような入力が必要ですか？
- 何を出力または実行すべきですか？
- どのようなエラーが発生する可能性がありますか？
- 冪等性を持つべきですか？

言語を選択します:
- **bash** - シェル操作、ファイル操作、CLIツール
- **python** - データ処理、API呼び出し、複雑なロジック
- **node/ts** - JavaScriptエコシステム、非同期操作

## ステップ5: スクリプトファイルを書く

以下を含む`scripts/{script-name}.{ext}`を作成します:
- 冒頭の目的コメント
- 使用方法の説明
- 入力検証
- エラーハンドリング
- 明確な出力/フィードバック

bashスクリプトの場合:
```bash
#!/bin/bash
set -euo pipefail
```

## ステップ6: 実行可能にする（bashの場合）

```bash
chmod +x ~/.claude/skills/{skill-name}/scripts/{script-name}.sh
```

## ステップ7: スクリプトを使用するようにワークフローを更新する

この操作が必要なワークフローを見つけます。以下を追加します:
```xml
<process>
...
N. `scripts/{script-name}.sh [引数]`を実行
N+1. 操作が成功したことを確認
...
</process>
```

## ステップ8: テストする

スキルワークフローを呼び出して検証します:
- スクリプトが適切なステップで実行される
- 入力が正しく渡される
- エラーが適切に処理される
- 出力が期待通りである
</process>

<success_criteria>
スクリプトは以下が完了したときに完了です:
- [ ] scripts/ ディレクトリが存在する
- [ ] スクリプトファイルが適切な構造を持っている（コメント、検証、エラーハンドリング）
- [ ] スクリプトが実行可能である（bashの場合）
- [ ] 少なくとも1つのワークフローがスクリプトを参照している
- [ ] ハードコードされたシークレットや認証情報がない
- [ ] 実際の呼び出しでテスト済み
</success_criteria>
